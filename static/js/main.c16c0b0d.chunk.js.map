{"version":3,"sources":["App.tsx","index.tsx"],"names":["groupBy","array","predicate","reduce","acc","value","index","_predicate","push","defaultAmount","genId","Math","random","toString","substring","App","_useState","useState","_useState2","_slicedToArray","data","setData","_useState3","_useState4","date","setDate","_useState5","_useState6","type","setType","_useState7","_useState8","amount","setAmount","templateRef","useRef","console","log","d","_jsxs","className","children","_jsx","id","map","_ref","onClick","filter","it","placeholder","onChange","e","target","min","parseInt","concat","_toConsumableArray","alert","length","ref","onClickCapture","el","range","document","createRange","selectNodeContents","sel","window","getSelection","removeAllRanges","addRange","selectElementContents","current","Object","entries","_ref2","_ref3","datums","moment","format","_d","iter","_Fragment","join","rootElement","getElementById","createRoot","render","StrictMode"],"mappings":"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","file":"static/js/main.c16c0b0d.chunk.js","sourcesContent":["import { useRef, useState } from 'react';\nimport moment from 'moment';\nimport './styles.css';\n\ntype Data = {\n  id: string;\n  type: string;\n  date: string;\n  amount: number;\n};\n\nfunction selectElementContents(el: HTMLElement) {\n  const range = document.createRange();\n  range.selectNodeContents(el);\n  const sel = window.getSelection();\n  if (sel) {\n    sel.removeAllRanges();\n    sel.addRange(range);\n  }\n}\n\nconst groupBy = <T,>(\n  array: T[],\n  predicate: (value: T, index: number, array: T[]) => string,\n) =>\n  array.reduce((acc, value, index, array) => {\n    (acc[predicate(value, index, array)] ||= []).push(value);\n    return acc;\n  }, {} as { [key: string]: T[] });\n\nconst defaultAmount = 600;\n\nconst genId = () => (Math.random() + 1).toString(36).substring(2);\n\nexport default function App() {\n  const [data, setData] = useState<Data[]>([]);\n  const [date, setDate] = useState('');\n  const [type, setType] = useState('court');\n  const [amount, setAmount] = useState<number>(defaultAmount);\n  const templateRef = useRef(null);\n\n  const addDatum = () => {\n    if (!date || !amount) {\n      alert('Missing fields');\n      return;\n    }\n    setData(d => [...d, { id: genId(), type, date, amount }]);\n    setDate('');\n    setAmount(defaultAmount);\n  };\n\n  console.log(groupBy(data, d => d.date));\n\n  return (\n    <div className=\"App\">\n      <h2>Enter some data.</h2>\n      <table id=\"data\">\n        {data.map(({ id, date, amount }) => (\n          <tr key={id}>\n            <td>{date}</td>\n            <td>₹{amount}</td>\n            <td>\n              <button\n                type=\"button\"\n                className=\"delete\"\n                onClick={() => {\n                  setData(d => d.filter(it => it.id !== id));\n                }}\n              >\n                Delete\n              </button>\n            </td>\n          </tr>\n        ))}\n      </table>\n      <div>\n        <input\n          type=\"text\"\n          value={type}\n          placeholder=\"Type\"\n          onChange={e => setType(e.target.value)}\n        />\n        <input\n          type=\"date\"\n          value={date}\n          placeholder=\"Date\"\n          onChange={e => setDate(e.target.value)}\n        />\n        <input\n          type=\"number\"\n          min={1}\n          value={typeof amount === 'number' ? amount : ''}\n          placeholder=\"Amount\"\n          onChange={e => setAmount(parseInt(e.target.value, 10))}\n        />\n        <button type=\"button\" onClick={addDatum}>\n          + Add data\n        </button>\n      </div>\n      {/* <pre style={{ textAlign: \"left\" }}>{JSON.stringify(data, null, 2)}</pre> */}\n      {data.length > 0 ? (\n        <div\n          ref={templateRef}\n          id=\"template\"\n          onClickCapture={() =>\n            selectElementContents(templateRef.current as unknown as HTMLElement)\n          }\n        >\n          <br />\n          <br />\n          Please find attached the receipts of the following:\n          <br />\n          <ol>\n            {Object.entries(groupBy(data, d => d.date)).map(\n              ([date, datums]) => (\n                <li key={date}>\n                  {moment(date).format('DD MMM')} -{' '}\n                  {datums.filter(d => d.type === 'court').length} court\n                  {datums.filter(d => d.type === 'court').length === 1\n                    ? ''\n                    : 's'}{' '}\n                  booked (₹\n                  {datums\n                    .filter(d => d.type === 'court')\n                    .map(_d => _d.amount)\n                    .reduce((acc, iter) => acc + iter, 0)}\n                  )\n                  {datums.filter(d => d.type !== 'court').length > 0 ? (\n                    <>\n                      {', '}\n                      {datums\n                        .filter(d => d.type !== 'court')\n                        .map(d => `${d.type} (₹${d.amount})`)\n                        .join(', ')}{' '}\n                      (Total: ₹\n                      {datums\n                        .map(_d => _d.amount)\n                        .reduce((acc, iter) => acc + iter, 0)}\n                      )\n                    </>\n                  ) : (\n                    ''\n                  )}{' '}\n                </li>\n              ),\n            )}\n          </ol>\n          Total:{' '}\n          <b>\n            ₹{data.map(_d => _d.amount).reduce((acc, iter) => acc + iter, 0)}\n            /-\n          </b>\n          <br />\n          <br />\n        </div>\n      ) : null}\n    </div>\n  );\n}\n","import { StrictMode } from \"react\";\nimport { createRoot } from \"react-dom/client\";\n\nimport App from \"./App\";\n\nconst rootElement = document.getElementById(\"root\");\nconst root = createRoot(rootElement!);\n\nroot.render(\n  <StrictMode>\n    <App />\n  </StrictMode>\n);\n"],"sourceRoot":""}